{"ast":null,"code":"import axios from \"axios\";\nimport { ElMessage } from \"element-plus\";\n\n// 请求拦截\naxios.interceptors.request.use(config => {\n  const token = window.sessionStorage.getItem('token');\n  config.headers.Authorization = `Bearer ${token}`;\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 响应拦截\naxios.interceptors.response.use(response => {\n  // 更新token\n  const {\n    authorization\n  } = response.headers;\n  authorization && window.sessionStorage.setItem(\"token\", authorization);\n  return response;\n}, error => {\n  // token过期 跳转login\n  const {\n    status\n  } = error.response;\n  if (status === 401) {\n    window.location.href = '/login';\n    return ElMessage.error('请重新登录');\n  }\n  return Promise.reject(error);\n});\nexport default axios;","map":{"version":3,"names":["axios","ElMessage","interceptors","request","use","config","token","window","sessionStorage","getItem","headers","Authorization","error","Promise","reject","response","authorization","setItem","status","location","href"],"sources":["D:/0/综合练习/全栈项目/news/前端/后台/admin/src/http/service.js"],"sourcesContent":["import axios from \"axios\"\r\nimport { ElMessage } from \"element-plus\";\r\n\r\n// 请求拦截\r\naxios.interceptors.request.use(config => {\r\n  const token = window.sessionStorage.getItem('token');\r\n  config.headers.Authorization = `Bearer ${token}`\r\n\r\n  return config;\r\n}, error => {\r\n  return Promise.reject(error);\r\n})\r\n\r\n// 响应拦截\r\naxios.interceptors.response.use(response => {\r\n  // 更新token\r\n  const { authorization } = response.headers;\r\n  authorization && window.sessionStorage.setItem(\"token\", authorization)\r\n  return response;\r\n}, error => {\r\n  // token过期 跳转login\r\n  const { status } = error.response;\r\n  if (status === 401) {\r\n    window.location.href = '/login';\r\n    return ElMessage.error('请重新登录')\r\n  }\r\n  return Promise.reject(error)\r\n})\r\n\r\nexport default axios"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,cAAc;;AAExC;AACAD,KAAK,CAACE,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;EACvC,MAAMC,KAAK,GAAGC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;EACpDJ,MAAM,CAACK,OAAO,CAACC,aAAa,GAAI,UAASL,KAAM,EAAC;EAEhD,OAAOD,MAAM;AACf,CAAC,EAAEO,KAAK,IAAI;EACV,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CAAC;;AAEF;AACAZ,KAAK,CAACE,YAAY,CAACa,QAAQ,CAACX,GAAG,CAACW,QAAQ,IAAI;EAC1C;EACA,MAAM;IAAEC;EAAc,CAAC,GAAGD,QAAQ,CAACL,OAAO;EAC1CM,aAAa,IAAIT,MAAM,CAACC,cAAc,CAACS,OAAO,CAAC,OAAO,EAAED,aAAa,CAAC;EACtE,OAAOD,QAAQ;AACjB,CAAC,EAAEH,KAAK,IAAI;EACV;EACA,MAAM;IAAEM;EAAO,CAAC,GAAGN,KAAK,CAACG,QAAQ;EACjC,IAAIG,MAAM,KAAK,GAAG,EAAE;IAClBX,MAAM,CAACY,QAAQ,CAACC,IAAI,GAAG,QAAQ;IAC/B,OAAOnB,SAAS,CAACW,KAAK,CAAC,OAAO,CAAC;EACjC;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CAAC;AAEF,eAAeZ,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}